# Table Tool 快速开始指南

这是一个 5 分钟快速上手指南，帮助你快速开始使用 Table Tool。

## 🚀 第一步：安装

```bash
# 克隆或下载项目到 Cocos Creator 项目目录
cd your-cocos-project/extensions/  # Cocos 3.x
# 或
cd your-cocos-project/packages/    # Cocos 2.x

# 进入插件目录
cd cc_table_tool

# 一键安装所有依赖
npm run install:all
```

## 🔨 第二步：选择运行模式

### 模式 A：浏览器开发（推荐新手）

最简单的方式，无需启动 Cocos Editor。

```bash
# 启动开发服务器
npm run dev:editor

# 浏览器访问
# → 自动打开 http://localhost:5173
```

### 模式 B：Cocos 插件

在 Cocos Creator 中使用。

```bash
# 构建插件
npm run build:v3    # Cocos 3.x
# 或
npm run build:v2    # Cocos 2.x

# 然后在 Cocos Creator 中：
# 1. 打开扩展管理器
# 2. 启用 "table_tool"
# 3. 菜单：开发者 → Table Tool → 数据编辑器
```

### 模式 C：独立桌面应用

打包成 .exe 文件，无需 Cocos Creator。

```bash
# 启动开发模式
npm run dev:electron

# 打包 exe
npm run build:exe
# → 生成 electron/dist/Table Tool.exe
```

## 📝 第三步：创建第一个表

### 1. 创建数据源

**浏览器/Electron 模式**：
- 点击右上角 "📄 创建数据"
- 输入名称：`game_data`
- 点击确定

**Cocos 模式**：
- 自动在项目根目录创建 `table_data.table`

### 2. 创建表定义

点击 "⚙️ 配置管理" → "➕ 新建表"

```
表 Key：items
表名：物品表
表描述：游戏物品配置
```

### 3. 添加字段

点击 "➕ 添加字段"，创建以下字段：

**字段1：id（数字）**
```
字段 Key：id
字段名：物品ID
类型：数字 (number)
默认值：0
最小值：1
最大值：9999
```

**字段2：name（文本）**
```
字段 Key：name
字段名：物品名称
类型：文本 (string)
默认值：未命名
最大长度：50
```

**字段3：rarity（下拉）**
```
字段 Key：rarity
字段名：稀有度
类型：下拉 (select)
选项：
  - 普通 → common
  - 稀有 → rare
  - 史诗 → epic
默认值：common
```

**字段4：attributes（对象）**
```
字段 Key：attributes
字段名：属性
类型：对象 (object)
子属性：
  - attack (number)：攻击力
  - defense (number)：防御力
  - speed (number)：速度
```

点击 "✅ 保存" 完成表定义。

### 4. 添加数据

返回主页面，点击 "items" 表进入数据编辑。

点击 "➕ 新增数据"：

```
数据 Key：item_sword

字段值：
  id：1
  name：宝剑
  rarity：epic
  attributes：
    attack：50
    defense：5
    speed：10
```

点击 "确定" 保存。

继续添加更多数据...

### 5. 保存数据

点击 "💾 保存" 按钮。

- **Cocos 模式**：保存到 `项目根目录/table_data.table`
- **其他模式**：选择保存位置

## 📤 第四步：导入/导出数据

### 快速导入示例数据

准备一个 JSON 文件（`items.json`）：

```json
{
  "item_sword": {
    "id": 1,
    "name": "宝剑",
    "attack": 50,
    "defense": 5,
    "price": 100
  },
  "item_shield": {
    "id": 2,
    "name": "盾牌",
    "attack": 0,
    "defense": 30,
    "price": 80
  },
  "item_potion": {
    "id": 3,
    "name": "药水",
    "heal": 50,
    "price": 20
  }
}
```

点击 "从 JSON 导入"：
1. 选择 `items.json`
2. 自动创建表和字段
3. 自动填充数据
4. 点击保存

### 导出数据

**单表导出**：
- 进入数据编辑页面
- 点击 "📤 导出 JSON"
- 选择保存位置

**批量导出**：
- 主页面点击 "📤 导出全部"
- 选择保存目录
- 每个表生成一个 JSON 文件

## 🎨 界面说明

### 主页面

```
┌────────────────────────────────────────────────────┐
│ 🗂️ Table Tool          [⚙️配置管理] [📤导出全部] │
├────────────────────────────────────────────────────┤
│ 📊 表数据管理 | 表数量：3 | 数据大小：1024 字节  │
├────────────────────────────────────────────────────┤
│                                                    │
│  ┌──────────────────────────────────────────────┐ │
│  │ items                            [从JSON导入] │ │
│  │ 物品表                                        │ │
│  │ 3 条数据                                      │ │
│  └──────────────────────────────────────────────┘ │
│                                                    │
│  ┌──────────────────────────────────────────────┐ │
│  │ characters                                    │ │
│  │ 角色表                                        │ │
│  │ 5 条数据                                      │ │
│  └──────────────────────────────────────────────┘ │
│                                                    │
└────────────────────────────────────────────────────┘
```

### 数据编辑页面

```
┌────────────────────────────────────────────────────┐
│ [← 返回] items - 物品表   [💾保存] [📤导出] [➕新增] │
├────────────────────────────────────────────────────┤
│ Key         │ id │ name   │ rarity │ 操作        │
├────────────────────────────────────────────────────┤
│ item_sword  │ 1  │ 宝剑   │ epic   │ [✏️] [🗑️]  │
│ item_shield │ 2  │ 盾牌   │ rare   │ [✏️] [🗑️]  │
│ item_potion │ 3  │ 药水   │ common │ [✏️] [🗑️]  │
└────────────────────────────────────────────────────┘
```

## 💡 快速技巧

### 1. 使用键盘快捷键

- `Ctrl/Cmd + S` - 保存数据
- `Ctrl/Cmd + N` - 新增数据
- `ESC` - 关闭弹窗

### 2. 数组字段使用

**定长数组**（如：技能槽位）：
```typescript
固定长度：5
元素类型：select
选项：技能1, 技能2, 技能3...
```
→ 初始自动创建 5 个空槽位

**不定长数组**（如：背包物品）：
```typescript
固定长度：0 或不设置
元素类型：object
子属性：itemId, count
```
→ 初始为空，手动添加元素

### 3. 对象字段使用

适合复杂数据结构：

```typescript
// 角色属性
{
  type: 'object',
  properties: [
    { key: 'hp', type: 'number' },
    { key: 'mp', type: 'number' },
    { 
      key: 'equipment',
      type: 'object',
      properties: [
        { key: 'weapon', type: 'string' },
        { key: 'armor', type: 'string' }
      ]
    }
  ]
}
```

### 4. 导入技巧

**对象格式**（推荐）：
```json
{
  "key1": { ...data... },
  "key2": { ...data... }
}
```
→ Key 直接使用，数据结构清晰

**数组格式**：
```json
[
  { "id": 1, ...data... },
  { "id": 2, ...data... }
]
```
→ 自动从 id/name 字段提取 key

## 🐛 常见问题

### 问题1：导入后看不到数据？

**解决**：
- 点击保存按钮
- 刷新页面
- 检查浏览器控制台错误

### 问题2：字段类型选错了？

**解决**：
- 在配置管理中编辑表
- 删除错误字段
- 重新添加正确类型

### 问题3：Cocos 插件菜单找不到？

**解决**：
- 检查是否已构建：`npm run build:v3`
- 重新加载插件：开发者 → 重新加载扩展
- 查看控制台错误信息

### 问题4：保存失败？

**解决**：
- 检查文件权限
- 确保有足够磁盘空间
- 查看控制台错误信息

## 📚 下一步

恭喜！你已经学会了基本使用。

**进阶学习**：
- [使用说明.md](./使用说明.md) - 完整功能说明
- [项目架构说明.md](./项目架构说明.md) - 架构设计
- [FAQ.md](./FAQ.md) - 更多问题解答

**功能探索**：
- 尝试不同的字段类型
- 使用数组和对象字段
- 批量导入导出数据
- 在 Cocos 项目中使用

**扩展开发**：
- 添加自定义字段类型
- 集成到游戏流程
- 开发数据验证规则

---

**遇到问题？**
- 查看 [FAQ.md](./FAQ.md)
- 发送邮件：306964942@qq.com

**最后更新**：2026-02-07  
**维护者**：oldP
