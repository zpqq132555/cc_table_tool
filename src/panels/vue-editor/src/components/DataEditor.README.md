# 数据编辑功能说明

## 页面结构

```
App.vue
├── main (主页面)
│   └── 点击表按钮 → data-editor
├── config (配置管理)
│   └── 新增/编辑表 → table-editor
├── table-editor (表配置编辑)
└── data-editor (表数据编辑) ✨ 已完成
```

## 功能特性

### DataEditor.vue - 数据编辑页面

**主要功能**：
- ✅ 显示表的所有数据（表格形式）
- ✅ 新增数据条目
- ✅ 编辑现有数据
- ✅ 删除数据条目
- ✅ 自动格式化显示不同类型的值
- ✅ 数据排序（拖拽调整 index）
- ✅ 导入导出 JSON

**字段类型支持（8 种）**：
- `string` - 文本输入（支持最大长度）
- `number` - 数字输入（支持 min/max/step）
- `boolean` - 复选框
- `select` - 下拉选择（自定义选项）
- `reward` - 奖励输入（id + count）
- `array` - 数组编辑器（支持嵌套类型）
- `object` - 对象编辑器（支持嵌套属性）

### FieldInput.vue - 字段输入组件

**自动适配字段类型**：
- 文本/数字：使用 `<input>` （带约束验证）
- 布尔：使用 `<checkbox>`
- 下拉：使用 `<select>`
- 奖励：双输入框（ID × 数量）
- 数组：使用 `ArrayEditor` 组件
- 对象：使用 `ObjectEditor` 组件

**特色功能**：
- 实时验证字段约束
- 响应式数据绑定
- 支持嵌套类型（数组/对象）

## 使用流程

1. **打开表**：主页面点击表按钮
2. **查看数据**：表格形式显示所有数据
3. **新增数据**：
   - 点击"➕ 新增数据"
   - 填写数据 Key 和字段值
   - 点击"确定"保存
4. **编辑数据**：
   - 点击数据行的"✏️"按钮
   - 修改字段值
   - 点击"确定"保存
5. **删除数据**：
   - 点击数据行的"🗑️"按钮
   - 确认删除
6. **保存**：点击"💾 保存"按钮保存到文件

## 数据结构

```typescript
// 表数据项
interface ITableDataItem {
  index: number;           // 排序索引
  info: Record<string, any>; // 实际数据
}

// 表数据集合
tableDef.data = {
  "item_001": {
    index: 0,
    info: { id: 1, name: "宝剑", attack: 50 }
  },
  "item_002": {
    index: 1,
    info: { id: 2, name: "盾牌", defense: 30 }
  }
}
```

## 样式设计

- 深色主题：VS Code 风格
- 响应式布局：适配不同屏幕
- 悬停效果：交互反馈
- 数据预览：长文本省略显示

## 导入功能

### 支持的 JSON 格式

**对象形式（推荐）**：
```json
{
  "item_sword": { "name": "宝剑", "attack": 50 },
  "item_shield": { "name": "盾牌", "defense": 30 }
}
```
→ 创建 1 个表，2 条数据（key 直接使用 JSON key）

**数组形式**：
```json
[
  { "id": 1, "name": "物品A" },
  { "id": 2, "name": "物品B" }
]
```
→ 创建 1 个表，2 条数据（key 从 id/name 字段提取）
- [ ] 撤销/重做功能
- [ ] 数据验证（必填、范围等）
- [ ] 富文本编辑器（多行文本）
- [ ] 嵌套对象/数组的可视化编辑
